<div class="container">
  <div>
    <form class="test-container" *ngIf="!examBasicInformationSet" [formGroup]="examGroup">
      <h1 class="header">NOWY TEST</h1>
      <br>
      <h3 class="text">Podaj nazwę testu: </h3>
      <input type="text" formControlName="name" required>
      <br>
      <h3 class="text">Podaj ilość pytań: </h3>
      <input type="number" formControlName="amountOfQuestions" min="1" max="50">
      <br>
      <h3 class="text">Podaj opis testu: </h3>
      <textarea formControlName="description"></textarea>
      <br>
      <br><br>
      <div class="login">
        <button mat-button class="login-button" (click)="addExam()">Stwórz test</button>
      </div>
    </form>

    <div *ngIf="examBasicInformationSet">
      <h4>Test: {{examGroup.value.name}}</h4>
    </div>


    <div *ngFor="let questionGroup of questionGroups; let q = index">

      <mat-card class="mat-elevation-z21 question-card">
        <form class="question" [formGroup]="questionGroup">
          <div class="row">
            <div class="col-md-3">
              <h2>Pytanie {{q + 1}}:</h2>
            </div>
            <div class="col-md-9">
              <input style="width: 100%" type="text" formControlName="content" required>
            </div>
          </div>

          <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-9">
              <mat-form-field appearance="fill">
                <mat-label>Typ pytania</mat-label>
                <mat-select disableRipple formControlName="type">
                  <mat-option value="one-choice">Jednokrotnego wyboru</mat-option>
                  <mat-option value="multi-choice">Wielokrotnego wyboru</mat-option>
                  <mat-option value="open">Otwarte</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-3">
              <h4>Podaj ilość odpowiedzi:</h4>
            </div>
            <div class="col-md-9">
              <input type="number" formControlName="amountOfAnswers">
            </div>
          </div>
          <button (click)="addQuestion(q)">Stwórz pytanie</button>
          <hr *ngIf="answersGroups.get(q)">


          <div *ngFor="let answerGroup of answersGroups.get(q); let a=index">
            <form [formGroup]="answerGroup">
              Odpowiedź {{a + 1}}:
              <div *ngIf="questionGroup.value.type=='multi-choice'">
                <input type="text" formControlName="content">
                <br>
                <mat-form-field appearance="fill">
                  <mat-label>Prawidłowa TAK/NIE:</mat-label>
                  <mat-select disableRipple formControlName="correct">
                    <mat-option value="true">TAK</mat-option>
                    <mat-option value="false">NIE</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div *ngIf="questionGroup.value.type=='one-choice'">
                <input type="text" formControlName="content">
                <br>

              </div>
            </form>
          </div>

          <mat-form-field *ngIf="questionGroup.value.type=='one-choice' && answersGroups.get(q)" appearance="fill">
            <mat-label>Wybierz prawidłową odpowiedź:</mat-label>
            <mat-select disableRipple (selectionChange)="saveOneChoiceQuestion(q, select.selected)" #select>
        <span *ngFor="let answerGroup of answersGroups.get(q); let number=index">
        <mat-option value="{{number}}">Odpowiedź {{number + 1}}</mat-option>
        </span>
            </mat-select>
          </mat-form-field>

        </form>
      </mat-card>
      <hr>
    </div>
    <button *ngIf="examBasicInformationSet" [disabled]="!isValid()" (click)="saveExam()">Zapisz Test</button>
  </div>
</div>


















