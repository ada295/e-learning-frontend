<div class="header-container row">
  <div class="course-name col-md-4">FIZYKA</div>
  <div class="lesson-number col-md-3">Lekcja 79</div>
  <div class="buttons-container col-md-5">
    <button class="button-option" mat-button routerLink="/lekcja/{{lessonId}}/test-opis">
      <div class="option-name">Test</div>
      <div class="icon-container">
        <mat-icon>school</mat-icon>
      </div>
    </button>
    <button class="button-option" mat-button routerLink="/lekcja/{{lessonId}}/materiały">
      <div class="option-name">Materiały</div>
      <div class="icon-container">
        <mat-icon>perm_media</mat-icon>
      </div>
    </button>
    <button class="button-option button-option-tasks" mat-button routerLink="/lekcja/{{lessonId}}/zadania">
      <div class="option-name">Zadania</div>
      <div class="icon-container">
        <mat-icon>library_books</mat-icon>
      </div>
    </button>
  </div>
</div>

<div *ngIf="sessionService.isStudent()" class="task-container">
  <p class="task-name">Zadanie</p>
  <div *ngIf="task?.status != 'OCENIONE'" class="task-details">
    Status zadania: {{task?.status}}
  </div>
  <div *ngIf="task?.status == 'OCENIONE'" class="task-details">
    Status zadania: <strong style="color: green">{{task?.status}}</strong>
    <div *ngIf="task?.status == 'OCENIONE'" class="task-details task-points">
      Ocena: {{task?.taskStudent?.grade?.value}}
    </div>
  </div>

  <div class="task-details">
    Termin oddania: {{task?.task?.endDate  | date: 'dd.MM.YYYY'}}
  </div>

  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Treść zadania
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="task-description">
        {{task?.task?.description}}
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <div *ngIf="task?.status == 'AKTYWNE'"  class="task-details file-attachment">
    Dodaj rozwiązanie:
  </div>
  <div *ngIf="task?.status == 'AKTYWNE'" class="file-upload">



<!--    <button *ngIf="task?.status == 'AKTYWNE'"  class="file-button" (click)="fileUpload.click()">-->
    <button *ngIf="task?.status == 'AKTYWNE'" class="upload-btn" (click)="fileUpload.click()">


      <!--    <button *ngIf="task?.status == 'AKTYWNE'" class="file-button" color="primary" class="upload-btn" (click)="fileUpload.click()">-->
      <!--      <div style="float: left">-->
      <mat-icon>note_add</mat-icon>
      <!--      </div>-->
    </button>

    <input type="file" class="file-input"
           (change)="onFileSelected($event)" #fileUpload>

    {{fileName || ""}}


  </div>



<!--  <button *ngIf="task?.status == 'AKTYWNE'" class="file-button">-->
<!--    <div style="float: left">-->
<!--      <mat-icon>note_add</mat-icon>-->
<!--    </div>-->
<!--  </button>-->



  <div *ngIf="task?.taskStudent?.status == 'WYKONANE' || task?.taskStudent?.status == 'OCENIONE'"  class="task-details file-attachment">
    Przesłane pliki:
  </div>
  <button *ngIf="task?.taskStudent?.status == 'WYKONANE' || task?.taskStudent?.status == 'OCENIONE'" class="file-button">
  <div style="float: left">
    <mat-icon> attach_file</mat-icon>
  </div>
  <div class="file-name">
    {{task?.taskStudent?.filename}}
  </div>
  </button>
  <div *ngIf="task?.status=='WYKONANE' && checkDate(task)" class="task-option-container">
    <button mat-button class="button-delete-task" (click)="deleteTask()">Usuń pliki</button>
  </div>

  <div style="clear:both"></div>

  <mat-accordion *ngIf="task?.status=='OCENIONE'">
    <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Komentarz nauczyciela
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="task-description" *ngIf="task?.taskStudent?.grade?.comment != null">
        {{task?.taskStudent?.grade?.comment}}
      </div>
      <div class="task-description" *ngIf="task?.taskStudent?.grade?.comment == null">
        Brak komentarza
      </div>
    </mat-expansion-panel>
  </mat-accordion>
</div>




















<div *ngIf="sessionService.isTeacher()" class="task-container">
  <p class="task-name">Zadanie</p>

  <div class="task-details">
    Termin oddania: {{task?.task?.endDate  | date: 'dd.MM.YYYY'}}
  </div>
        <div class="task-details" style="margin-bottom: 20px !important;">
          Treść zadania: </div>
      <div class="task-description task-details">
        {{task?.task?.description}}
      </div>

  <div *ngIf="task?.status == 'AKTYWNE'"  class="task-details file-attachment">
    Dodaj rozwiązanie:
  </div>
  <div *ngIf="task?.status == 'AKTYWNE'" class="file-upload">



    <!--    <button *ngIf="task?.status == 'AKTYWNE'"  class="file-button" (click)="fileUpload.click()">-->
    <button *ngIf="task?.status == 'AKTYWNE'" class="upload-btn" (click)="fileUpload.click()">


      <!--    <button *ngIf="task?.status == 'AKTYWNE'" class="file-button" color="primary" class="upload-btn" (click)="fileUpload.click()">-->
      <!--      <div style="float: left">-->
      <mat-icon>note_add</mat-icon>
      <!--      </div>-->
    </button>

    <input type="file" class="file-input"
           (change)="onFileSelected($event)" #fileUpload>

    {{fileName || ""}}


  </div>



  <!--  <button *ngIf="task?.status == 'AKTYWNE'" class="file-button">-->
  <!--    <div style="float: left">-->
  <!--      <mat-icon>note_add</mat-icon>-->
  <!--    </div>-->
  <!--  </button>-->



  <div *ngIf="task?.taskStudent?.status == 'WYKONANE' || task?.taskStudent?.status == 'OCENIONE'"  class="task-details file-attachment">
    Przesłane pliki:
  </div>
  <button *ngIf="task?.taskStudent?.status == 'WYKONANE' || task?.taskStudent?.status == 'OCENIONE'" class="file-button">
    <div style="float: left">
      <mat-icon> attach_file</mat-icon>
    </div>
    <div class="file-name">
      {{task?.taskStudent?.filename}}
    </div>
  </button>
  <div *ngIf="task?.status=='WYKONANE' && checkDate(task)" class="task-option-container">
    <button mat-button class="button-delete-task" (click)="deleteTask()">Usuń pliki</button>
  </div>

  <div style="clear:both"></div>

  <mat-accordion *ngIf="task?.status=='OCENIONE'">
    <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Komentarz nauczyciela
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="task-description" *ngIf="task?.taskStudent?.grade?.comment != null">
        {{task?.taskStudent?.grade?.comment}}
      </div>
      <div class="task-description" *ngIf="task?.taskStudent?.grade?.comment == null">
        Brak komentarza
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <div style="text-align: center; margin-top: 85px">
    <button mat-button class="button-edit">Edytuj</button>
    <button mat-button class="button-delete-task">Usuń</button>
  </div>

